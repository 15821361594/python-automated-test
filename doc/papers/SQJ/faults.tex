\section{Faults Discovered}

\begin{figure}
{\scriptsize 
\begin{code}
shapefilelist0 = glob.glob("C:\\Arctmp\\*.shp")                                           \textcolor{black!45}{\# STEP 0}
\textcolor{black!45}{\#[}
shapefile0 = shapefilelist0 [0]                                           \textcolor{black!45}{\# STEP 1}
newlayer0 = "l1"                                                          \textcolor{black!45}{\# STEP 2}
\textcolor{black!45}{\#  or newlayer0 = "l2" }
\textcolor{black!45}{\#  or newlayer0 = "l3" }
\textcolor{black!45}{\#  swaps with steps 3 4 5 6 7}
\textcolor{black!45}{\#] (steps in [] can be in any order)}
\textcolor{black!45}{\#[}
featureclass0 = shapefile0                                                \textcolor{black!45}{\# STEP 3}
\textcolor{black!45}{\#  swaps with step 2}
fieldname0 = "newf1"                                                      \textcolor{black!45}{\# STEP 4}
\textcolor{black!45}{\#  or fieldname0 = "newf2" }
\textcolor{black!45}{\#  or fieldname0 = "newf3" }
\textcolor{black!45}{\#  swaps with steps 2 8}
selectiontype0 = "SWITCH\_SELECTION"                                       \textcolor{black!45}{\# STEP 5}
\textcolor{black!45}{\#  or selectiontype0 = "NEW\_SELECTION" }
\textcolor{black!45}{\#  or selectiontype0 = "ADD\_TO\_SELECTION" }
\textcolor{black!45}{\#  or selectiontype0 = "REMOVE\_FROM\_SELECTION"}
\textcolor{black!45}{\#  or selectiontype0 = "SUBSET\_SELECTION"}
\textcolor{black!45}{\#  or selectiontype0 = "CLEAR\_SELECTION"   }
\textcolor{black!45}{\#  swaps with steps 2 8}
op0 = ">"                                                                 \textcolor{black!45}{\# STEP 6}
\textcolor{black!45}{\#  or op0 = "<" }
\textcolor{black!45}{\#  swaps with steps 2 8}
val0 = "100"                                                              \textcolor{black!45}{\# STEP 7}
\textcolor{black!45}{\#  or val0 = "1000" }
\textcolor{black!45}{\#  swaps with steps 2 8}
\textcolor{black!45}{\#] (steps in [] can be in any order)}
arcpy.MakeFeatureLayer\_management(featureclass0, newlayer0)                                             \textcolor{black!45}{\# STEP 8}
\textcolor{black!45}{\#  swaps with steps 4 5 6 7}
arcpy.SelectLayerByAttribute\_management(newlayer0,selectiontype0,
   ' "'+fieldname0+'" '+op0+val0)                                         \textcolor{black!45}{\# STEP 9}
arcpy.Delete\_management(featureclass0)                                    \textcolor{black!45}{\# STEP 10}
arcpy.SelectLayerByAttribute\_management(newlayer0,selectiontype0,
   ' "'+ fieldname0+'" '+op0+val0)                                        \textcolor{black!45}{\# STEP 11}
\end{code}
}
\caption{Deleting a feature class does not invalidate layers that depend on it.}
\label{fault1}
\end{figure}

\begin{figure}
{\scriptsize 
\begin{code}
shapefilelist0 = sorted(glob.glob(arcpy.env.workspace + "\\*.shp"))                   \# STEP 0
\#[
shapefile0 = shapefilelist0 [0]                                                      \# STEP 1
newlayer0 = "l1"                                                                     \# STEP 2
\#  or newlayer0 = "l2" 
\#  or newlayer0 = "l3" 
\#  swaps with step 3
\#] (steps in [] can be in any order)
\#[
featureclass0 = shapefile0                                                           \# STEP 3
\#  swaps with step 2
classorlayer0 = newlayer0                                                            \# STEP 4
\#  swaps with steps 10 11 12
fieldtype0 = "DATE"                                                                  \# STEP 5
\#  or fieldtype0 = "TEXT" 
\#  or fieldtype0 = "FLOAT" 
\#  or fieldtype0 = "DOUBLE" 
\#  or fieldtype0 = "SHORT" 
\#  or fieldtype0 = "LONG" 
\#  swaps with steps 10 11 12
fieldname0 = "newf1"                                                                 \# STEP 6
\#  swaps with steps 10 11 12
op0 = ">"                                                                            \# STEP 7
\#  or op0 = "<" 
\#  or op0 = "<=" 
\#  or op0 = ">=" 
\#  or op0 = "=" 
\#  swaps with steps 10 11 12 14
val0 = "100"                                                                         \# STEP 8
\#  or val0 = "1000" 
\#  swaps with steps 10 11 12 14
stattable0 = arcpy.env.workspace + "\\stats.dbf"                                      \# STEP 9
\#  swaps with steps 10 11 12 14
\#] (steps in [] can be in any order)
\#[
fieldlist0 = arcpy.ListFields(featureclass0)                                         \# STEP 10
\#  swaps with steps 4 5 6 7 8 9 14
stattype0 = "FIRST"                                                                  \# STEP 11
\#  or stattype0 = "LAST" 
\#  swaps with steps 4 5 6 7 8 9
statfields0 = []                                                                     \# STEP 12
\#  swaps with steps 4 5 6 7 8 9
\#] (steps in [] can be in any order)
\#[
statfields0.append([fieldname0,stattype0])                                           \# STEP 13
arcpy.AddField\_management(featureclass0,fieldname0,fieldtype0); report()             \# STEP 14
\#  swaps with steps 7 8 9 10
\#] (steps in [] can be in any order)
fieldname0 = fieldlist0 [0].name \# STEP 15
arcpy.MakeFeatureLayer\_management(featureclass0,newlayer0,
   where\_clause=' "' + fieldname0 + '" ' + op0 + val0); report()                     \# STEP 16
fieldname0 = "newf1"                                                                 \# STEP 17
arcpy.DeleteField\_management(featureclass0,fieldname0); report()                     \# STEP 18
arcpy.Statistics\_analysis(classorlayer0,stattable0,statfields0); report()            \# STEP 19
\end{code}
}
\caption{Deleting a field then computing statistics on it causes a crash.}
\label{fault2}
\end{figure}

\begin{figure}
{\scriptsize 
\begin{code}
shapefilelist0 = sorted(glob.glob(arcpy.env.workspace + "\\*.shp"))                   \# STEP 0
shapefile0 = shapefilelist0 [0]                                                      \# STEP 1
featureclass0 = shapefile0                                                           \# STEP 2
\#[
classorlayer0 = featureclass0                                                        \# STEP 3
fieldtype0 = "DOUBLE"                                                                \# STEP 4
\#  or fieldtype0 = "TEXT"
\#  or fieldtype0 = "FLOAT"
\#  or fieldtype0 = "SHORT"
\#  or fieldtype0 = "LONG"
\#  or fieldtype0 = "DATE"
\#  swaps with step 6
fieldname0 = "newf1"                                                                 \# STEP 5
\#  or fieldname0 = "newf3"
\#  swaps with steps 6 8
\#] (steps in [] can be in any order)
\#[
insertcursor0 = arcpy.InsertCursor(classorlayer0)                                    \# STEP 6
\#  swaps with steps 4 5
arcpy.AddField\_management(featureclass0,fieldname0,fieldtype0); report()             \# STEP 7
\#] (steps in [] can be in any order)
fieldname0 = "newf2"                                                                 \# STEP 8
\#  or fieldname0 = "newf3"
\#  swaps with step 5
arcpy.AddField\_management(featureclass0,fieldname0,fieldtype0); report()             \# STEP 9
insertcursor0 = arcpy.InsertCursor(classorlayer0)                                    \# STEP 10
\end{code}
}
\caption{Creating two insert cursors on a layer, after adding two fields to the feature class underlying it, causes a crash.}
\label{fault3}
\end{figure}

